---
title: Payment Application Example
description: Build a complete Stellar payment application with Nextellar
---

# Payment Application Example

Learn how to build a complete payment application on Stellar using Nextellar. This example covers wallet connection, balance display, sending payments, and transaction history.

## What We'll Build

A full-featured payment app with:

- âœ… Multi-wallet connection (Freighter, Albedo, Lobstr)
- âœ… Real-time balance display
- âœ… Send XLM and custom assets
- âœ… Transaction history with pagination
- âœ… QR code generation for receiving
- âœ… Transaction status tracking
- âœ… Error handling and validation

## Live Demo

ðŸ”— [View Live Demo](https://stellar-payment-demo.vercel.app) (Coming soon)

## Prerequisites

- Node.js 20.18.0 or later
- A Stellar wallet (Freighter recommended)
- Testnet XLM (get from [Friendbot](https://laboratory.stellar.org/#account-creator))

## Step 1: Create the Project

```bash
npx nextellar stellar-payment-app
cd stellar-payment-app
npm run dev
```

## Step 2: Project Structure

```
stellar-payment-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â””â”€â”€ page.tsx                    # Main payment interface
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ WalletConnectButton.tsx     # Wallet connection
â”‚   â”‚   â”œâ”€â”€ BalanceCard.tsx             # Balance display
â”‚   â”‚   â”œâ”€â”€ SendPaymentForm.tsx         # Payment form
â”‚   â”‚   â”œâ”€â”€ TransactionHistory.tsx      # Transaction list
â”‚   â”‚   â””â”€â”€ ReceiveQRCode.tsx           # QR code for receiving
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useStellarWallet.ts         # Wallet management
â”‚   â”‚   â”œâ”€â”€ useStellarPayment.ts        # Payment handling
â”‚   â”‚   â””â”€â”€ useTransactionHistory.ts    # Transaction queries
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ stellar-wallet-kit.ts       # Wallet configuration
â””â”€â”€ package.json
```

## Step 3: Build the Main Interface

Create `src/app/page.tsx`:

```tsx
'use client';

import { useState } from 'react';
import { useStellarWallet } from '@/hooks/useStellarWallet';
import WalletConnectButton from '@/components/WalletConnectButton';
import BalanceCard from '@/components/BalanceCard';
import SendPaymentForm from '@/components/SendPaymentForm';
import TransactionHistory from '@/components/TransactionHistory';
import ReceiveQRCode from '@/components/ReceiveQRCode';

export default function PaymentApp() {
  const { connected, publicKey, balances } = useStellarWallet();
  const [activeTab, setActiveTab] = useState<'send' | 'receive' | 'history'>(
    'send'
  );

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800">
      <div className="container mx-auto px-4 py-8">
        {/* Header */}
        <header className="mb-8">
          <h1 className="text-4xl font-bold text-gray-900 dark:text-white mb-2">
            Stellar Payment App
          </h1>
          <p className="text-gray-600 dark:text-gray-300">
            Send and receive XLM and custom assets on Stellar
          </p>
        </header>

        {/* Wallet Connection */}
        <div className="mb-8">
          <WalletConnectButton />
        </div>

        {connected ? (
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
            {/* Left Column - Balance */}
            <div className="lg:col-span-1">
              <BalanceCard balances={balances} publicKey={publicKey} />
            </div>

            {/* Right Column - Actions */}
            <div className="lg:col-span-2">
              {/* Tabs */}
              <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                <div className="flex gap-2 mb-6 border-b">
                  {(['send', 'receive', 'history'] as const).map((tab) => (
                    <button
                      key={tab}
                      onClick={() => setActiveTab(tab)}
                      className={`px-4 py-2 font-medium capitalize transition-colors border-b-2 ${
                        activeTab === tab
                          ? 'border-blue-500 text-blue-600 dark:text-blue-400'
                          : 'border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'
                      }`}
                    >
                      {tab}
                    </button>
                  ))}
                </div>

                {/* Tab Content */}
                {activeTab === 'send' && <SendPaymentForm />}
                {activeTab === 'receive' && (
                  <ReceiveQRCode publicKey={publicKey} />
                )}
                {activeTab === 'history' && (
                  <TransactionHistory publicKey={publicKey} />
                )}
              </div>
            </div>
          </div>
        ) : (
          <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-12 text-center">
            <p className="text-gray-600 dark:text-gray-300 text-lg">
              Connect your wallet to get started
            </p>
          </div>
        )}
      </div>
    </div>
  );
}
```

## Step 4: Balance Card Component

Create `src/components/BalanceCard.tsx`:

```tsx
'use client';

import { Balance } from '@/hooks/useStellarWallet';
import { RefreshCw } from 'lucide-react';

interface BalanceCardProps {
  balances: Balance[];
  publicKey?: string;
}

export default function BalanceCard({ balances, publicKey }: BalanceCardProps) {
  const xlmBalance =
    balances.find((b) => b.asset_type === 'native')?.balance || '0';
  const assetBalances = balances.filter((b) => b.asset_type !== 'native');

  return (
    <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
      <div className="flex items-center justify-between mb-4">
        <h2 className="text-xl font-semibold">Your Balance</h2>
        <button className="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full">
          <RefreshCw className="w-4 h-4" />
        </button>
      </div>

      {/* XLM Balance */}
      <div className="mb-6">
        <p className="text-sm text-gray-600 dark:text-gray-400 mb-1">XLM</p>
        <p className="text-3xl font-bold text-gray-900 dark:text-white">
          {parseFloat(xlmBalance).toLocaleString('en-US', {
            minimumFractionDigits: 2,
            maximumFractionDigits: 7,
          })}
        </p>
      </div>

      {/* Asset Balances */}
      {assetBalances.length > 0 && (
        <div>
          <h3 className="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3">
            Assets
          </h3>
          <div className="space-y-2">
            {assetBalances.map((balance, index) => (
              <div
                key={index}
                className="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"
              >
                <span className="font-medium">{balance.asset_code}</span>
                <span className="text-gray-600 dark:text-gray-400">
                  {parseFloat(balance.balance).toLocaleString()}
                </span>
              </div>
            ))}
          </div>
        </div>
      )}

      {/* Public Key */}
      <div className="mt-6 pt-6 border-t">
        <p className="text-xs text-gray-600 dark:text-gray-400 mb-1">
          Your Address
        </p>
        <p className="text-xs font-mono break-all text-gray-900 dark:text-white">
          {publicKey}
        </p>
      </div>
    </div>
  );
}
```

## Step 5: Send Payment Form

Create `src/components/SendPaymentForm.tsx`:

```tsx
'use client';

import { useState } from 'react';
import { useStellarWallet } from '@/hooks/useStellarWallet';
import { Send } from 'lucide-react';

export default function SendPaymentForm() {
  const { sendPayment, balances } = useStellarWallet();
  const [recipient, setRecipient] = useState('');
  const [amount, setAmount] = useState('');
  const [memo, setMemo] = useState('');
  const [loading, setLoading] = useState(false);
  const [txHash, setTxHash] = useState('');
  const [error, setError] = useState('');

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!sendPayment) return;

    setLoading(true);
    setError('');
    setTxHash('');

    try {
      const result = await sendPayment({
        to: recipient,
        amount: amount,
        asset: 'XLM',
        memo: memo || undefined,
      });

      setTxHash(result.hash);
      setRecipient('');
      setAmount('');
      setMemo('');
    } catch (err) {
      setError((err as Error).message);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      {/* Recipient */}
      <div>
        <label className="block text-sm font-medium mb-2">
          Recipient Address
        </label>
        <input
          type="text"
          value={recipient}
          onChange={(e) => setRecipient(e.target.value)}
          placeholder="GDEF456..."
          className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
          required
        />
      </div>

      {/* Amount */}
      <div>
        <label className="block text-sm font-medium mb-2">Amount (XLM)</label>
        <input
          type="number"
          step="0.0000001"
          value={amount}
          onChange={(e) => setAmount(e.target.value)}
          placeholder="10.5"
          className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
          required
        />
      </div>

      {/* Memo */}
      <div>
        <label className="block text-sm font-medium mb-2">
          Memo (optional)
        </label>
        <input
          type="text"
          value={memo}
          onChange={(e) => setMemo(e.target.value)}
          placeholder="Payment for services"
          maxLength={28}
          className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
        />
        <p className="text-xs text-gray-500 mt-1">Max 28 characters</p>
      </div>

      {/* Submit Button */}
      <button
        type="submit"
        disabled={loading}
        className="w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
      >
        <Send className="w-4 h-4" />
        {loading ? 'Sending...' : 'Send Payment'}
      </button>

      {/* Success Message */}
      {txHash && (
        <div className="p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg">
          <p className="text-sm font-medium text-green-800 dark:text-green-200 mb-1">
            Payment Successful!
          </p>
          <a
            href={`https://stellar.expert/explorer/testnet/tx/${txHash}`}
            target="_blank"
            rel="noopener noreferrer"
            className="text-sm text-green-600 dark:text-green-400 hover:underline break-all"
          >
            View on Stellar Expert â†’
          </a>
        </div>
      )}

      {/* Error Message */}
      {error && (
        <div className="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg">
          <p className="text-sm text-red-800 dark:text-red-200">{error}</p>
        </div>
      )}
    </form>
  );
}
```

## Features Implemented

### 1. Wallet Connection

- Multi-wallet support (Freighter, Albedo, Lobstr)
- Persistent connection via localStorage
- Auto-reconnect on page reload

### 2. Balance Display

- Real-time XLM balance
- Custom asset balances
- Formatted number display
- Refresh capability

### 3. Send Payments

- XLM transfers
- Custom asset support (extensible)
- Memo field
- Transaction validation
- Error handling

### 4. Transaction History

- Paginated transaction list
- Transaction details
- Links to block explorer
- Real-time updates

### 5. Receive Payments

- QR code generation
- Address display
- Copy to clipboard

## Deployment

Deploy to Vercel:

```bash
npm run build
vercel deploy
```

## Next Steps

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
  <a
    href="/examples/nft-marketplace"
    className="block p-4 border rounded-lg hover:border-primary transition-colors"
  >
    <h4 className="font-semibold mb-2">NFT Marketplace</h4>
    <p className="text-sm text-muted-foreground">
      Build an NFT marketplace on Stellar
    </p>
  </a>

  <a
    href="/guides/deployment"
    className="block p-4 border rounded-lg hover:border-primary transition-colors"
  >
    <h4 className="font-semibold mb-2">Deployment Guide</h4>
    <p className="text-sm text-muted-foreground">
      Deploy your app to production
    </p>
  </a>
</div>

## Source Code

ðŸ“¦ [Download Complete Source Code](https://github.com/nextellarlabs/nextellar-examples/tree/main/payment-app)

## Related Documentation

- [useStellarWallet Hook](/hooks/use-stellar-wallet)
- [useStellarPayment Hook](/hooks/use-stellar-payment)
- [useTransactionHistory Hook](/hooks/use-transaction-history)
